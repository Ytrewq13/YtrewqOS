\documentclass{article}

\usepackage[margin=1in]{geometry}
\usepackage{titlesec}
\usepackage{datetime}

\usepackage{graphicx}

\usepackage{amssymb}
\usepackage{amsmath}

\usepackage{csquotes}
\usepackage[english]{babel}
\usepackage[backend=biber]{biblatex}
\addbibresource{~/Documents/books/bibliobraphy/uni.bib}

\usepackage{titling}
\renewcommand\maketitlehooka{\null\mbox{}\vfill}
\renewcommand\maketitlehookd{\vfill\null}

\usepackage{parskip}

\newdateformat{mydate}{\dayofweekname{\THEDAY}{\THEMONTH}{\THEYEAR}, \ordinal{DAY} \monthname[\THEMONTH], \THEYEAR}

\title{AArch64 (ARM 64-bit) based Unix-like Operating System for the Raspberry
Pi 3b}
\author{Sam Whitehead}
\date{\mydate\today}

\begin{document}
\begin{titlingpage}
    \maketitle
    \begin{abstract}
        \setlength{\parindent}{0pt}
        \setlength{\parskip}{0.5em}
        \noindent
        Blah blah blah \dots

        Lorem ipsum dolor sit amet, consectetur adipiscing elit \dots
        % TODO: write an abstract (is that needed?)
    \end{abstract}
\end{titlingpage}
\tableofcontents

\clearpage
\section{Introduction}
\subsection{What is ARM64?}
\subsection{What is an Operating System?}
\subsection{Why the Raspberry Pi?}

\clearpage
\section{Getting Started}
\subsection{Setting up the build system}
For this project, we cannot use a traditional compilation setup. Normally, a
program runs in a hosted environment, which means that it can use a standard
library for some basic functions. In the case of C code, this is \texttt{libc}.
Our Operating System will be running on bare metal, so we cannot use any of the
standard header files provided by \texttt{libc}, which means that the entire C
standard library is unavailable. We can still use some provided header files,
including \texttt{stddef.h} and \texttt{stdint.h}, as these are provided as
part of the compiler. There are other header files available in this
``freestanding'' environment, but these two are the main ones for the first
stages of development, since they give us types such as \texttt{uint32\_t} and
\texttt{size\_t}.

In addition to the compiler flags needed for freestanding development, we also
may need a completely different compiler. If we develop our Operating System on
any hardware other than a Raspberry Pi, there will likely be compatibility
issues with the code generated from a regular compiler. This relates to the
\textbf{Architecture} of the system running the compiler. The Raspberry Pi we
are developing for has an architecture of \texttt{Aarch64}, or 64-bit ARM,
whereas our PCs are likely to be \texttt{x86} or \texttt{x86\_64} architecture
computers. This means we need a compiler that generates machine code for
\texttt{Aarch64} based systems. We would call such a compiler a
\textbf{Cross-compiler} if it runs on a different architecture compared with
the machine code it produces.
\subsubsection{Cross-compilation terminology and tools}
\begin{itemize}
    \item \textbf{Build}: The architecture of the computer we are using to
        compile the program.
    \item \textbf{Host}: The architecture of the computer our program will run
        on.
    \item \textbf{Target}: The architecture our program builds for (only used
        when the program is or contains a compiler).
\end{itemize}
For this project we will be using the LLVM suite of tools, as it is designed to
be a cross-compiler first, so all of the tools (compiler, assembler, binary
manipulation tools, etc.) are capable of handling our required Aarch64 host
system. The compiler, ``clang'', takes a command-line argument which indicates
the architecture of the host system (LLVM ignores the difference between host
and target, calling them both ``target'').
\subsubsection{Our basic Makefile}
\subsection{How we will debug the OS}
\subsubsection{GDB}
\subsubsection{Serial Port}
\subsection{Developing on hardware}
\subsubsection{kernel8.img}
\subsubsection{Reading from the serial port on GPIO using MiniCOM on our build
system}

\clearpage
\section{The Kernel}
\subsection{The early boot process}
\subsection{Memory allocation and management}
\subsection{The filesystem}
\subsection{System calls}
\subsection{Process handling}
\subsection{The init process}

\clearpage
\section{The Shell}

\clearpage
\section{Multiprocessing on the BCM2837}
The processor on the Raspberry Pi we are developing for, the Broadcom BCM2837,
has 4 CPU cores, so we should be able to run 4 different computations on one at
the same time. This section will discuss the new challenges we can encounter as
we try to get this working.
\subsection{Starting the CPUs in order to run processes on them}
\subsection{Scheduling processes in a multicore world}

\end{document}
